{"version":3,"sources":["components/PointContainerLayout.tsx","components/PointContainer.tsx","models/ColorPoint.ts","utils/utils.ts","hooks/reducer.ts","hooks/usePointsHoooks.ts","components/App.tsx","index.tsx"],"names":["Container","styled","div","_templateObject","props","concat","radius","color","x","y","React","memo","react_default","a","createElement","PointContainerLayout","point","onClick","handleClick","idx","ColorPoint","Object","classCallCheck","this","randomByRange","max","min","small","Math","large","random","pointReducer","state","action","produce","draft","type","payload","usePointsHoooks","defaultPoints","useMemo","points","i","floor","toString","push","genDefaultPoints","_useReducer","useReducer","reducer","_useReducer2","slicedToArray","dispatch","useCallback","move","changeColor","changeRadius","Layout","App_templateObject","App","_usePointsHoooks","_usePointsHoooks2","map","components_PointContainer","key","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.1b33be33.chunk.js","sourcesContent":["import styled from 'styled-components';\r\n\r\ninterface StyledProps {\r\n  x: number;\r\n  y: number;\r\n  color: string;\r\n  radius: number;\r\n}\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  transition: all 0.6s;\r\n  width: ${(props: StyledProps) => `${props.radius * 2}px`};\r\n  height: ${(props: StyledProps) => `${props.radius * 2}px`};\r\n  background-color: ${(props: StyledProps) => props.color};\r\n  transform: ${(props: StyledProps) => `translate(${props.x}px, ${props.y}px)`};\r\n`;\r\n\r\nexport default Container;\r\n","import React from \"react\";\r\nimport ColorPoint from \"../models/ColorPoint\";\r\nimport Container from \"./PointContainerLayout\";\r\n\r\ninterface Props {\r\n  point: ColorPoint;\r\n  handleClick: (idx: number) => void;\r\n  idx: number;\r\n}\r\nfunction PointContainer(props: Props) {\r\n  return (\r\n    <Container\r\n      x={props.point.x}\r\n      y={props.point.y}\r\n      color={props.point.color}\r\n      radius={props.point.radius}\r\n      onClick={() => props.handleClick(props.idx)}\r\n    />\r\n  );\r\n}\r\n\r\nexport default React.memo(PointContainer);\r\n","export default class ColorPoint {\r\n  public readonly x: number;\r\n  public readonly y: number;\r\n  public readonly radius: number;\r\n  public readonly color: string;\r\n  constructor(x: number, y: number, radius: number, color: string) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.radius = radius;\r\n    this.color = color;\r\n  }\r\n\r\n  public move(x: number, y: number) {\r\n    return new ColorPoint(x, y, this.radius, this.color);\r\n  }\r\n\r\n  public changeColor(color: string) {\r\n    return new ColorPoint(this.x, this.y, this.radius, color);\r\n  }\r\n\r\n  public changeRadius(radius: number) {\r\n    return new ColorPoint(this.x, this.y, radius, this.color);\r\n  }\r\n}\r\n","import ColorPoint from '../models/ColorPoint';\r\n\r\nexport function genDefaultPoints(): ColorPoint[] {\r\n  const points = [];\r\n  for (let i = 0; i < 100; i++) {\r\n    // 需要考虑位移加半径可能会超出区域\r\n    const x = randomByRange(590, 0);\r\n    const y = randomByRange(590, 0);\r\n    const color = Math.floor(randomByRange(0xffffff, 0)).toString(16);\r\n    const point = new ColorPoint(x, y, 5, `#${color}`);\r\n    points.push(point);\r\n  }\r\n  return points;\r\n}\r\n\r\nexport function randomByRange(max: number, min: number): number {\r\n  const small = Math.min(max, min);\r\n  const large = Math.max(max, min);\r\n  return Math.random() * (large - small) + small;\r\n}\r\n","import produce from 'immer';\r\nimport ColorPoint from '../models/ColorPoint';\r\nimport Action from '../models/Action';\r\n\r\nconst pointReducer = (state: ColorPoint[], action: Action) =>\r\n  produce(state, draft => {\r\n    switch (action.type) {\r\n      case 'MOVE':\r\n        draft[action.payload.idx] = action.payload.point;\r\n        return;\r\n\r\n      default:\r\n        return;\r\n    }\r\n  });\r\n\r\nexport default pointReducer;\r\n","import { useState, useCallback, useReducer, useMemo } from 'react';\r\nimport { genDefaultPoints, randomByRange } from '../utils/utils';\r\nimport ColorPoint from '../models/ColorPoint';\r\nimport reducer from './reducer';\r\n\r\nexport default function usePointsHoooks(): [\r\n  ColorPoint[],\r\n  (idx: number) => void\r\n] {\r\n  const defaultPoints = useMemo(() => genDefaultPoints(), []);\r\n  const [points, dispatch] = useReducer(reducer, defaultPoints);\r\n\r\n  const handleClick = useCallback((idx: number) => {\r\n    const color = Math.floor(randomByRange(0xffffff, 0)).toString(16);\r\n    const radius = randomByRange(10, 2);\r\n    const x = randomByRange(600 - radius * 2, 0);\r\n    const y = randomByRange(600 - radius * 2, 0);\r\n    const point = points[idx]\r\n      .move(x, y)\r\n      .changeColor(`#${color}`)\r\n      .changeRadius(radius);\r\n\r\n    dispatch({ type: 'MOVE', payload: { idx: idx, point: point } });\r\n  }, []);\r\n\r\n  return [points, handleClick];\r\n}\r\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PointContainer from \"./PointContainer\";\nimport usePointsHoooks from \"../hooks/usePointsHoooks\";\n\nconst Layout = styled.div`\n  width: 600px;\n  height: 600px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -300px;\n  margin-left: -300px;\n  border: 1px solid;\n  transition: all 1s;\n`;\n\nconst App: React.FC = () => {\n  const [points, handleClick] = usePointsHoooks();\n  return (\n    <Layout>\n      {points.map((point, idx) => {\n        return (\n          <PointContainer\n            key={idx}\n            point={point}\n            idx={idx}\n            handleClick={handleClick}\n          />\n        );\n      })}\n    </Layout>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}